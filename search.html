<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>个人站</title>
<link rel="stylesheet" type="text/css" href="styles/search.css" />
    <script src="scripts/main.js" type="text/javascript"></script>
    <script src="scripts/jquery/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    jQuery(document).ready(function(){
        $("#header").load("header.html");
        $("#footer").load("footer.html");
        $("#backtop").click(function () {
            var speed = 300;//滑动的速度
            $('html,body').animate({"scrollTop": 0}, speed);
        });
        searchF();
    });
	var curPage = 0;
    function searchF(){
        curPage = 1;
        var options = {
            url: '/blog/article/list/'+ curPage,
            type: 'get',
            dataType: 'json',
            data: $("#searchForm").serialize(),
            success: function (response) {
                $.each(response.data,function (index, item) {
                    var content = Main.article(item);
                    $("#list-ul").append(content);
                });
            }
        };
        $.ajax(options);
    }
    $(document).scroll(function () {
        //滚动条高度
        var scrollTop = $(window).scrollTop();
        //内容高度
        var contentH = $(document).height();
        //可见高度
        var viewH =  $(window).height();

        if(contentH - viewH - scrollTop <= 200) {
            if(curPage == 0){
                return;
            }
            curPage++;
            var options = {
                url: '/blog/article/list/'+ curPage,
                type: 'get',
                dataType: 'json',
                data: $("#searchForm").serialize(),
                success: function (response) {
                    $.each(response.data,function (index, item) {
                        var content = Main.article(item);
                        $("#list-ul").append(content);
                    });
                    $("#resultsDiv").attr("class","border-list");
                }
            };
            $.ajax(options);
        }
    });

</script>
</head>
<body>
<div id="header">
</div>
<div class="home-background">
    <div class="content-page">
        <div class="search-page">
            <form id="searchForm" class="search-form" method="post">
                <fieldset class="search-field">
                    <input class="search-text" name="search" type="text" value="" placeholder="站内搜索"/>
                    <input type="button" onclick="searchF();" class="search-button" />
                    <div class="search-container">
                        <input type="radio" name="check" value="web" id="searchWeb" checked/>
                        <label class="search-label" for="searchWeb">全站</label>
                        <input type="radio" name="check" value="web" id="searchJava"/>
                        <label class="search-label" for="searchJava">Java</label>
                    </div>
                </fieldset>
            </form>
        </div>
        <div id="resultsDiv">
            <ul id="list-ul" class="feedlist_mod">
            </ul>
        </div>
    </div>
    <div class="right-bottom-btn">
        <a id="backtop" class="backtop-btn" title="返回顶部" >
            <svg xmlns="http://www.w3.org/2000/svg" width="19" height="12">
                <path d="M9.314 0l9.313 9.314-2.12 2.121-7.193-7.192-7.193 7.192L0 9.314z" fill="#FFF" fill-rule="evenodd">
                </path>
            </svg>
        </a>
    </div>
</div>
<div id="footer">
</div>
</body>
</html>
